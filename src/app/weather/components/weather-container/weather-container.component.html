<div class="weather-container">

    <mat-toolbar color="primary">
        <span>Weather Travel Forecast</span>
    </mat-toolbar>

    <div class="content">

        <!-- 🌆 City Selector -->
        <div class="city-selector-wrapper">
            <app-city-selector [cities]="availableCities" [selectedCity]="selectedCity$ | async"
                (citySelected)="onCitySelected($event)">
            </app-city-selector>
        </div>

        <!-- ⏳ Loading State -->
        @if (loading$ | async) {
        <div class="loading-container">
            <mat-spinner></mat-spinner>
            <p>Loading forecast data...</p>
        </div>
        }

        <!-- ⚠️ Error State -->
        @if (error$ | async; as error) {
        <div class="error-container">
            <mat-icon color="warn">error</mat-icon>
            <p>{{ error }}</p>
        </div>
        }

        <!-- 🌤 Forecast Section -->
        @if ((hasForecast$ | async) && !(loading$ | async) && !(error$ | async)) {
        <div class="forecast-section">
            <h2>5-Day Forecast</h2>
            <app-forecast-list [forecastDays]="forecastDays$ | async"></app-forecast-list>
        </div>
        }

        <!-- 🌇 No City Selected -->
        @if (!(selectedCity$ | async) && !(loading$ | async)) {
        <div class="no-selection-container">
            <mat-icon>wb_sunny</mat-icon>
            <p>Please select a city to view the forecast</p>
        </div>
        }

    </div>
</div>